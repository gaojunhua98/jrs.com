(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c488610"],{"1be3":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("商品SKU列表")]),r("div",{staticClass:"button-wrap"},[t._v("\n        商品名称:\n        "),r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入……",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.search_model,callback:function(e){t.search_model=e},expression:"search_model"}}),r("Button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),r("Button",{staticStyle:{"margin-left":"20px"},on:{click:t.reset}},[t._v("重置")]),r("Button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"md-add"},on:{click:t.clickAdd}},[t._v("添加")])],1),r("Table",{attrs:{columns:t.columns1,loading:t.loading,data:t.data1},scopedSlots:t._u([{key:"sku_attributes",fn:function(e){var a=e.row;return t._l(a.sku_attributes,(function(e,a){return r("div",{key:a,staticStyle:{margin:"5px 0"}},[r("div",{staticStyle:{margin:"5px 0"}},[t._v(t._s(e))])])}))}}])}),r("Page",{staticStyle:{float:"right","margin-top":"20px"},attrs:{total:t.total,"page-size":t.pagination.limit,current:t.pagination.page,"show-sizer":"","show-total":""},on:{"update:current":function(e){return t.$set(t.pagination,"page",e)},"on-change":t.initData,"on-page-size-change":t.changePageSize}}),r("Modal",{attrs:{title:t.title},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[r("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":130}},[r("FormItem",{attrs:{prop:"shop_id",label:"店铺"}},[r("Select",{staticStyle:{width:"260px"},attrs:{filterable:"",placeholder:"请选择……"},model:{value:t.formValidate.shop_id,callback:function(e){t.$set(t.formValidate,"shop_id",e)},expression:"formValidate.shop_id"}},t._l(t.shop_arr,(function(e,a){return r("Option",{key:a,attrs:{value:e.shop_id}},[t._v(t._s(e.shop_name))])})),1)],1),r("FormItem",{attrs:{prop:"depository_id",label:"仓库"}},[r("Select",{staticStyle:{width:"260px"},attrs:{filterable:"",placeholder:"请选择……"},model:{value:t.formValidate.depository_id,callback:function(e){t.$set(t.formValidate,"depository_id",e)},expression:"formValidate.depository_id"}},t._l(t.depository_arr,(function(e,a){return r("Option",{key:a,attrs:{value:e.depository_id}},[t._v(t._s(e.depository_name))])})),1)],1),r("FormItem",{attrs:{prop:"goods_id",label:"商品名称"}},[r("Select",{staticStyle:{width:"260px"},attrs:{filterable:"",placeholder:"请选择……"},on:{"on-change":function(e){return t.goodsChange(t.formValidate.goods_id)}},model:{value:t.formValidate.goods_id,callback:function(e){t.$set(t.formValidate,"goods_id",e)},expression:"formValidate.goods_id"}},t._l(t.goods_arr,(function(e,a){return r("Option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.value))])})),1)],1),r("FormItem",{attrs:{prop:"sku_attributes",label:"属性"}},[r("Select",{staticStyle:{width:"260px"},attrs:{filterable:"",multiple:"",placeholder:"请选择……"},model:{value:t.formValidate.sku_attributes,callback:function(e){t.$set(t.formValidate,"sku_attributes",e)},expression:"formValidate.sku_attributes"}},t._l(t.selectList,(function(e,a){return r("Option",{key:a,attrs:{value:e.value}},[t._v(t._s(e.value))])})),1)],1),r("FormItem",{attrs:{prop:"sku_num",label:"数量"}},[r("InputNumber",{staticStyle:{width:"260px"},attrs:{min:0,step:1,placeholder:"请选择……"},model:{value:t.formValidate.sku_num,callback:function(e){t.$set(t.formValidate,"sku_num",e)},expression:"formValidate.sku_num"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(e){t.modal1=!1}}},[t._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},i=[],s=(r("8e6e"),r("ac6a"),r("456d"),r("7f7f"),r("bd86")),n=(r("96cf"),r("3b8d")),o=r("c24f");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(r,!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u={data:function(){var t=this;return{shop_arr:[],depository_arr:[],good:"",data1:[],search_model:"",pagination:{pageNum:10,page:1},total:0,query:{},loading:!1,modal1:!1,title:"",formValidate:{},ruleValidate:{shop_id:[{required:!0,type:"number",message:"店铺不能为空",trigger:"change"}],depository_id:[{required:!0,type:"number",message:"仓库不能为空",trigger:"change"}],goods_id:[{required:!0,type:"number",message:"商品名称不能为空",trigger:"change"}],sku_attributes:[{required:!0,type:"array",message:"属性不能为空",trigger:"change"}]},goods_arr:[],selectList:[],columns1:[{title:"编号",type:"index",align:"center"},{title:"店铺",key:"shop_name",align:"center"},{title:"仓库",key:"depository_name",align:"center"},{title:"商品名称",key:"goods_name",align:"center"},{title:"属性",key:"sku_attributes",align:"center",slot:"sku_attributes"},{title:"数量",key:"sku_num",align:"center"},{title:"操作",key:"created_time",align:"center",render:function(e,r){var a=r.row;return e("div",{style:{color:"#fd3f31",fontSize:"14px",cursor:"pointer"}},[e("span",{style:{margin:"0 10px",cursor:"pointer"},on:{click:function(){return t.clickModify(a)}}},"修改"),e("span",{style:{cursor:"pointer"},on:{click:function(){return t.clickDelete(a)}}},"删除")])}}]}},created:function(){this.initData(),this.getGoodsList(),this.getAllShops(),this.getAllDepositorys()},computed:{},methods:{initData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,o["a"].getGoodsSkuList(l({},this.pagination,{},this.query,{user_id:this.$store.state.user.userId}));case 4:e=t.sent,1===e.data.code&&(this.data1=e.data.data.list.data,this.total=e.data.data.list.total),this.loading=!1,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),this.loading=!1,console.log(t.t0),this.$Message.error("数据获取失败！");case 14:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),getGoodsList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,o["a"].getGoodsList(l({},this.pagination,{user_id:this.$store.state.user.userId}));case 4:e=t.sent,1===e.data.code&&(this.goods_arr=e.data.data.list.data.map((function(t){return{value:t.goods_name,id:t.goods_id}}))),this.loading=!1,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),this.loading=!1,console.log(t.t0),this.$Message.error("数据获取失败！");case 14:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),getAllShops:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getAllShops({user_id:this.$store.state.user.userId});case 3:e=t.sent,1===e.data.code&&(this.shop_arr=e.data.data.list),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getAllDepositorys:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getAllDepositorys({user_id:this.$store.state.user.userId});case 3:e=t.sent,1===e.data.code&&(this.depository_arr=e.data.data.list),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),addGoodsSku:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.formValidate.user_id=this.$store.state.user.userId,t.next=4,o["a"].addGoodsSku({saveInfo:this.formValidate});case 4:e=t.sent,1===e.data.code&&(this.$Message.success("添加SPU成功！"),this.modal1=!1,this.initData()),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error("添加SPU失败！");case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),updateGoodsSku:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].updateGoodsSku(l({},{goods_sku_id:e},{},{saveInfo:this.formValidate}));case 3:r=t.sent,1===r.data.code&&(this.$Message.success("修改SPU成功！"),this.modal1=!1,this.initData()),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error("修改SPU失败！");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),changePageSize:function(t){this.pagination.limit=t,this.initData()},search:function(){this.query={query:{goods_name:this.search_model}},this.initData(),this.query={}},reset:function(){this.search_model="",this.initData()},clickAdd:function(){this.modal1=!0,this.title="添加SPU",this.$refs["formValidate"].resetFields(),this.formValidate={},this.selectList=[]},clickModify:function(t){this.modal1=!0,this.title="修改SPU",this.formValidate=JSON.parse(JSON.stringify(t)),this.goodsChange(this.formValidate.goods_id),this.goodsSkuId=t.goods_sku_id},clickDelete:function(t){var e=this;this.$Modal.confirm({title:"温馨提示",content:"确定要删除".concat(t.goods_name,"吗？"),onOk:function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].updateGoodsSku(l({},{goods_sku_id:t.goods_sku_id},{},{saveInfo:{is_del:1}}));case 3:a=r.sent,1===a.data.code&&(e.$Message.success("删除成功！"),e.initData()),r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log(r.t0),e.$Message.error("删除失败");case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));function a(){return r.apply(this,arguments)}return a}(),onCancel:function(){e.$Message.info("已取消！")}})},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?"添加SPU"===e.title?e.addGoodsSku():e.updateGoodsSku(e.goodsSkuId):e.$Message.error("请输入正确的信息!")}))},goodsChange:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getAttributesByGoodsName({goods_id:e});case 3:r=t.sent,1===r.data.code&&(this.selectList=r.data.data),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()}},d=u,p=(r("6cd5"),r("2877")),h=Object(p["a"])(d,a,i,!1,null,"0676e385",null);e["default"]=h.exports},"6cd5":function(t,e,r){"use strict";var a=r("85b1"),i=r.n(a);i.a},"85b1":function(t,e,r){}}]);