(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b81d5f8"],{"16d9":function(t,e,a){},"1d30":function(t,e,a){"use strict";var r=a("16d9"),n=a.n(r);n.a},"2c51":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h1",[t._v("商品SPU列表")]),a("div",{staticClass:"button-wrap"},[t._v("\n        商品名称:\n        "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入……",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.search_model,callback:function(e){t.search_model=e},expression:"search_model"}}),a("Button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),a("Button",{staticStyle:{"margin-left":"20px"},on:{click:t.reset}},[t._v("重置")]),a("Button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"md-add"},on:{click:t.clickAdd}},[t._v("添加")])],1),a("Table",{attrs:{columns:t.columns1,loading:t.loading,data:t.data1}}),a("Page",{staticStyle:{float:"right","margin-top":"20px"},attrs:{total:t.total,"page-size":t.pagination.limit,current:t.pagination.page,"show-sizer":"","show-total":""},on:{"update:current":function(e){return t.$set(t.pagination,"page",e)},"on-change":t.initData,"on-page-size-change":t.changePageSize}}),a("Modal",{attrs:{title:t.title},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"商品名称",prop:"goods_name"}},[a("i-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入……"},model:{value:t.formValidate.goods_name,callback:function(e){t.$set(t.formValidate,"goods_name",e)},expression:"formValidate.goods_name"}})],1),a("FormItem",{attrs:{prop:"goods_attributes",label:"属性"}},[a("Select",{staticStyle:{width:"260px"},attrs:{filterable:"",multiple:"",placeholder:"请选择……"},model:{value:t.formValidate.goods_attributes,callback:function(e){t.$set(t.formValidate,"goods_attributes",e)},expression:"formValidate.goods_attributes"}},t._l(t.attributes_arrlist,(function(e,r){return a("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.value))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.modal1=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),o=(a("96cf"),a("3b8d")),s=(a("6b54"),a("c24f"));function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={data:function(){var t=this;return{data1:[],search_model:"",pagination:{pageNum:10,page:1},total:0,query:{},loading:!1,modal1:!1,title:"",formValidate:{},ruleValidate:{goods_name:[{required:!0,type:"string",message:"属性名称不能为空",trigger:"blur"}],goods_attributes:[{required:!0,type:"array",message:"属性值不能为空",trigger:"change"}]},attributes_arrlist:[],columns1:[{title:"编号",type:"index",align:"center"},{title:"商品名称",key:"goods_name",align:"center"},{title:"属性",key:"goods_name",align:"center",render:function(t,e){var a=e.row;return t("div",a.goods_attributes.toString())}},{title:"商品SKU数",key:"skuNum",align:"center"},{title:"库存量",key:"inventory",align:"center"},{title:"操作",key:"created_time",align:"center",render:function(e,a){var r=a.row;return e("div",{style:{color:"#fd3f31",fontSize:"14px",cursor:"pointer"}},[e("span",{style:{margin:"0 10px",cursor:"pointer"},on:{click:function(){return t.clickModify(r)}}},"修改"),e("span",{style:{cursor:"pointer"},on:{click:function(){return t.clickDelete(r)}}},"删除")])}}]}},created:function(){this.initData(),this.getAllAttributes()},computed:{},methods:{initData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,s["a"].getGoodsList(l({},this.pagination,{},this.query,{user_id:this.$store.state.user.userId}));case 4:e=t.sent,1===e.data.code&&(this.data1=e.data.data.list.data,this.total=e.data.data.list.total),this.loading=!1,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),this.loading=!1,console.log(t.t0),this.$Message.error("数据获取失败！");case 14:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),addGoods:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.formValidate.user_id=this.$store.state.user.userId,t.next=4,s["a"].addGoods({saveInfo:this.formValidate});case 4:e=t.sent,1===e.data.code&&(this.$Message.success("添加SPU成功！"),this.modal1=!1,this.initData()),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error("添加SPU失败！");case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),updateGoods:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].updateGoods(l({},{goods_id:e},{},{saveInfo:this.formValidate}));case 3:a=t.sent,1===a.data.code&&(this.$Message.success("修改SPU成功！"),this.modal1=!1,this.initData()),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error("修改SPU失败！");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),getAllAttributes:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].getAllAttributes();case 3:e=t.sent,1===e.data.code&&(this.attributes_arrlist=e.data.data.list.map((function(t){return{value:t.attributes_name}}))),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),this.$Message.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),changePageSize:function(t){this.pagination.limit=t,this.initData()},search:function(){this.query={query:{goods_name:this.search_model}},this.initData(),this.query={}},reset:function(){this.search_model="",this.initData()},clickAdd:function(){this.modal1=!0,this.title="添加SPU",this.$refs["formValidate"].resetFields(),this.formValidate={},this.formValidate.shop_leve=1},clickModify:function(t){this.modal1=!0,this.title="修改SPU",this.formValidate=JSON.parse(JSON.stringify(t)),this.goodsId=t.goods_id},clickDelete:function(t){var e=this;this.$Modal.confirm({title:"温馨提示",content:"确定要删除".concat(t.goods_name,"吗？"),onOk:function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s["a"].updateGoods(l({},{goods_id:t.goods_id},{},{saveInfo:{is_del:1}}));case 3:r=a.sent,1===r.data.code&&(e.$Message.success("删除成功！"),e.initData()),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0),e.$Message.error("删除失败");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));function r(){return a.apply(this,arguments)}return r}(),onCancel:function(){e.$Message.info("已取消！")}})},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?"添加SPU"===e.title?e.addGoods():e.updateGoods(e.goodsId):e.$Message.error("请输入正确的信息!")}))}}},d=u,p=(a("1d30"),a("2877")),f=Object(p["a"])(d,r,n,!1,null,"0f91e275",null);e["default"]=f.exports},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var r=a("cb7c"),n=a("0bfb"),i=a("9e1e"),o="toString",s=/./[o],c=function(t){a("2aba")(RegExp.prototype,o,t,!0)};a("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?c((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?n.call(t):void 0)})):s.name!=o&&c((function(){return s.call(this)}))}}]);